
# --- Step 1: Layout Analysis ---

LAYOUT_ANALYSIS_PROMPT = """
Проанализируй структуру страницы строительной документации.
Найди и выдели следующие типы блоков:
1. "title_block" - штамп (обычно внизу справа или внизу страницы).
2. "table" - любые таблицы, спецификации, ведомости.
3. "drawing" - чертежи, схемы, планы, графические узлы.
4. "text_block" - блоки сплошного текста, примечания, списки.
5. "header" - крупные заголовки разделов или листов.

Верни JSON-список объектов. Каждый объект должен иметь поля:
- "type": тип блока (один из перечисленных выше)
- "box": координаты [ymin, xmin, ymax, xmax] (нормализованные от 0 до 1000, где 1000 - это высота/ширина всей картинки)

Пример:
[
  {"type": "title_block", "box": [850, 600, 980, 990]},
  {"type": "header", "box": [50, 100, 100, 900]}
]

Верни ТОЛЬКО валидный JSON список. Не добавляй никаких пояснений.
"""

# --- Step 2: Targeted Extraction ---

# А. Штамп (Title Block)
TITLE_BLOCK_PROMPT = """
Извлеки всю информацию из этого изображения штампа (title block).
Верни результат в виде JSON. Ключи должны быть на русском языке.
Постарайся найти поля: "Номер_проекта", "Название_листа", "Организация", "Лист", "Листов", "Стадия", "Разработал", "Проверил".
Если поле не найдено, не включай его в JSON.

Верни ТОЛЬКО JSON.
"""

# Б. Таблица (Table)
TABLE_PROMPT = """
Извлеки все данные из этой таблицы.
Верни результат в формате Markdown, точно сохраняя структуру строк и столбцов.
Если есть объединенные ячейки, постарайся отобразить их корректно текстом.

Верни ТОЛЬКО Markdown таблицу.
"""

# В. Чертеж (Drawing) - извлечение текста и смысла
DRAWING_PROMPT = """
Проанализируй этот фрагмент чертежа.
1. "description": Кратко опиши, что изображено (например: "План 1-го этажа", "Разрез 1-1", "Схема вентиляции", "Узел примыкания").
2. "content": Извлеки весь текст (OCR) - выноски, размеры, названия осей.

Верни результат в формате JSON:
{
  "description": "Описание чертежа...",
  "content": [
     {"text": "ФЛ-1", "box": [100, 200, 150, 300]},
     {"text": "3600", "box": [500, 500, 550, 600]}
  ]
}

Верни ТОЛЬКО JSON.
"""

# Г. Текстовый блок (Text Block)
TEXT_BLOCK_PROMPT = """
Распознай весь текст в этом блоке. Сохрани форматирование (абзацы, списки).
Верни результат просто текстом.
"""
